<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axiom</title>
    <script src="assets/scripts/global.js"></script>
    <link rel="stylesheet" href="assets/scripts/global.css">
    <!-- Service Worker-->
    <script src="assets/scripts/sw.js"></script>
</head>
<body>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
        }
        nav {
            background-color: #111;
            padding: 20px;
            text-align: center;
            position: fixed;
            width: 100%;
            top: 0;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        nav ul li {
            display: inline;
            margin-right: 20px;
        }
        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 18px;
        }
        nav ul li a:hover {
            color: #00FF00;
        }
        .content {
            margin-top: 60px; /* Adjust margin top to make space for the fixed navbar */
            width: 100%;
            height: 100%;
        }
        .avatar {
            border-radius: 10%;
            border-color: white;
            border-style: solid;
            width: 80px;
            border-width: 2px;
            display: inline-table;
        }
        .stuff {
            display: inline-table;
            position: relative;
            text-align: center;
            /* CSS adjustment */
        }
        .username,
        .message {
            font-size: 30px;
        }
        .stuff h2 {
            display: inline-table;
            position: relative;
            text-align: center;
            padding: 20px;
            bottom: 30px;
        }
        .dock {
            width: max-content;
        }
    </style>
    <nav>
        <img src="../axiom.png" class="icon-nav" style="width: 60px; height: 40px; left: 10px; position: fixed; top: 10px;">
        <ul>
            <li><a href="../main.html">Home</a></li>
            <li><a href="../apps.html">Apps</a></li>
            <li><a href="../tabs.html">Tabs</a></li>
            <li><a style="float: right" href="../settings.html">⚙️</a></li>
        </ul>
    </nav> 
    <widgetbot
    server="1200803518802571334"
    channel="1203397754781573210"
    width="800"
    height="600"
></widgetbot>
<iframe src="https://axiomhub.net/main.php?url=https://discord.com" height="100%" width="100%"></iframe>

    <script>
iframe = document.getElementById("iframe");
tempElement = document.body

// set interval for page altering
setInterval(function(){

       // regex for ALL urls besides https://axiomhub.net/main.php?url=
       regex = "^https:\/\/(?!axiomhub\.net\/main\.php\?url=).*""


        
      
        tempElement.querySelectorAll('a').forEach(anchor => {
        let href = anchor.getAttribute('href');
        anchor.setAttribute('href', modifyRelativeURL(href));
      });
      
      // Modify the src attributes of script tags
      tempElement.querySelectorAll('script').forEach(script => {
        let src = script.getAttribute('src');
        if (src && !src.startsWith('http://') && !src.startsWith('https://')) {
          script.setAttribute('src', modifyRelativeURL(src));
        }
      });
      
      // Modify the src attributes of img tags
      tempElement.querySelectorAll('img').forEach(img => {
        let src = img.getAttribute('src');
        if (src && !src.startsWith('http://') && !src.startsWith('https://')) {
          img.setAttribute('src', modifyRelativeURL(src));
        }
      });
      
      // Modify the href attributes of link tags for CSS
      tempElement.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
        let href = link.getAttribute('href');
        if (href && !href.startsWith('http://') && !href.startsWith('https://')) {
          link.setAttribute('href', modifyRelativeURL(href));
        }
      });
      
      // Modify the src attributes of video tags
      tempElement.querySelectorAll('video').forEach(video => {
        let src = video.getAttribute('src');
        if (src && !src.startsWith('http://') && !src.startsWith('https://')) {
          video.setAttribute('src', modifyRelativeURL(src));
        }
      });
      
      // Modify the src attributes of audio tags
      tempElement.querySelectorAll('audio').forEach(audio => {
        let src = audio.getAttribute('src');
        if (src && !src.startsWith('http://') && !src.startsWith('https://')) {
          audio.setAttribute('src', modifyRelativeURL(src));
        }
      });

      iframe.contentDocument.body.innerHTML = tempElement.innerHTML;
      iframe.style.zIndex="99"
      iframe.style.width="100%"
      iframe.style.height="100%"
      document.title=iframe.contentDocument.title

      // regex time
      iframe.contentDocument.body.innerHTML = iframe.contentDocument.body.innerHTML.replace(regex, 'https://axiomhub.net/main.php?url=https://');
    }, 100)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('sw.js')
            .then(function(registration) {
                console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch(function(error) {
                console.error('Service Worker registration failed:', error);
            });
    });
}
    </script>
</body>
</html>
